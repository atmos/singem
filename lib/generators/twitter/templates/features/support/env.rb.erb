require File.expand_path(File.join(File.dirname(__FILE__), '..', '..', 'vendor', 'gems', 'environment'))
require File.join(File.dirname(__FILE__), '..', '..', 'lib', '<%= name %>')

require 'spec'
require 'spec/mocks'
require 'webrat'
require 'rack/test'
require 'dm-sweatshop'
require 'fakeweb'
require 'pp'

require File.dirname(__FILE__)+'/../../spec/helpers'

Webrat.configure do |config|
  config.mode = :rack
  config.application_port = 4567
end

World(Rack::Test::Methods)
World(Spec::Mocks::ExampleMethods)
World(Webrat::Methods)
World(Webrat::Matchers)
World(<%= name.camelize %>::AppHelpers)

Before do
  DataMapper.setup(:default, "sqlite3://:memory:")
  DataMapper.auto_migrate!
end
