ENV['RACK_ENV'] ||= 'development'
require File.join(File.dirname(__FILE__), '..', '..', 'lib', '<%= name %>')
gem "rack-test", ">=0.4.0"
gem "webrat", "~>0.4.4"
gem "cucumber", "~>0.3.91"
gem "fakeweb", ">=1.2.5"

require 'spec'
require 'webrat'
require 'rack/test'
require 'fakeweb'

Webrat.configure do |config|
  config.mode = :rack_test
  config.application_port = 4567
end

module <%= name.camelize %>::AppHelpers
  begin
    gem 'safariwatir', '~>0.3.3'
    require 'safariwatir'
    def browser
      @browser ||= Watir::Safari.new
    end
  rescue LoadError => e
  end

  def app_host
    'http://localhost:9393/migration'
  end

  def app
    <%= name.camelize %>.app
  end
end

World(Rack::Test::Methods)
World(Webrat::Matchers)
World(<%= name.camelize %>::AppHelpers)

Before do
  # insert before filtery things here
end
