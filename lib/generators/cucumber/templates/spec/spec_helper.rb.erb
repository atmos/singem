ENV['RACK_ENV'] ||= 'development'
require File.join(File.dirname(__FILE__), '..', 'lib', '<%= name %>')
gem "rack-test", ">=0.4.0"
gem "webrat", "~>0.4.4"
gem "fakeweb", ">=1.2.5"
gem "randexp", ">=0.1.4"

require 'randexp'
require 'rack/test'
require 'webrat'
#require 'dm-core'
#require 'dm-sweatshop'
require 'fakeweb'
require 'pp'

FakeWeb.allow_net_connect = false

#require File.dirname(__FILE__)+'/fixtures'
#DataMapper.setup(:default, 'sqlite3::memory:')

Webrat.configure do |config|
  config.mode = :rack_test
  config.application_port = 4567
end

Spec::Runner.configure do |config|
  config.include(Rack::Test::Methods)
  config.include(Webrat::Methods)
  config.include(Webrat::Matchers)

  config.before(:each) do
    #DataMapper.auto_migrate!
    FakeWeb.clean_registry
  end

  def app
    <%= name.camelize %>.app
  end
end
